{% extends 'core/base.html' %}

{% block content %}

<div class="container">

    <div class="row text-center mb-3 x-5">
        <button class="btn btn-info btn-lg btn-block col-10 mx-2"><a class="" href="/horarios/citas/registrar">Crear cita</a></button>
        <button class="btn btn-warning text-center col-1" ><a class="nav-link" href="/horarios/?estado=cancelado">Notifs: {{ citas_canceladas|length }}</a></button>
    </div>

    <div class="container">
        <form class="form-control text-center" method="get" action="">
            <label for="fecha">Fecha:</label>
            <input type="date" id="fecha" name="fecha"
                min="{{fecha_min.year}}-{{fecha_min.month}}-1"
                max="{{fecha_max.year}}-{{fecha_max.month}}-{{fecha_max.day}}"
            >

            <select name="veterinario" id="veterinario">
                <option value="">Todos</option>
                {% for vet in veterinarios %}
                    <option value="{{ vet.id }}">{{ vet.nombre }}</option>
                {% endfor %}
            </select>

            <label for="pendiente">Pendiente</label>
            <input type="radio" id="pendiente" name="estado" value="pendiente" checked>

            <label for="realizado">Realizado</label>
            <input type="radio" id="realizado" name="estado" value="realizado">

            <label for="cancelado">Cancelado</label>
            <input type="radio" id="cancelado" name="estado" value="cancelado">

            <button class="btn btn-primary">Ir</button>
        </form>
    </div>

    <table class="table">
        <thead>
            <tr>
                <th></th>
                <th>Cliente</th>
                <th>Veterinario</th>
                <th>Mascota</th>
                <th>Fecha</th>
                <th>Hora</th>
                <th>Estado</th>
                <th>Acciones</th>
            </tr>
        </thead>

        <tbody>
            {% for cita in citas %}
            <tr>
                <td></td>
                <td>{{ cita.ficha_cliente.cliente }}</td>
                <td>{{ cita.veterinario.nombre }}</td>
                <td>{{ cita.ficha_cliente.mascota }}</td>
                <td>{{ cita.fecha }}</td>
                <td>{{ cita.hora_inicial_a_tiempo }} - {{ cita.hora_final_a_tiempo }}</td>
                <td>{{ cita.estado }}</td>
                <td>
                    <a href="{% url 'eliminar_cita' cita.id %}" 
                        class="btn btn-sm btn-danger">
                        Eliminar
                    </a>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>


{% endblock %}